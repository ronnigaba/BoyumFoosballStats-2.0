@page "/ScoreCollection"
@using BoyumFoosballStats_2._0.Shared.DbModels
@inject IScoreCollectionViewModel _ViewModel

<MudFab Color="Color.Primary" OnClick="_ViewModel.ToggleDrawer" StartIcon="@Icons.Material.Filled.Person">Drawer</MudFab>
@* ToDo RGA - Width should be 100% on devices *@
@if (_ViewModel.SelectedPlayers != null && _ViewModel.SelectedPlayers.Any())
{
    <MudSelect T="Player" Label="Black Attacker">
        @foreach (var player in _ViewModel.SelectedPlayers)
        {
            <MudSelectItem T="Player" Value="@player">@player.Name</MudSelectItem>
        }
    </MudSelect>
}

<MudDrawer @bind-Open="@_ViewModel.DrawerOpen"
           Anchor="Anchor.End"
           Elevation="1"
           Variant="@DrawerVariant.Temporary"
           ClipMode="DrawerClipMode.Always"
           Width="100%">
    <MudGrid Justify="Justify.Center">
        <MudItem sm="3">
            <MudSwitch Label="Auto-swap players" @bind-Checked="@_ViewModel.AutoSwapPlayers" Color="Color.Primary"/>
        </MudItem>
        <MudItem sm="3">
            <MudSwitch Label="Auto-balance matches" @bind-Checked="@_ViewModel.AutoBalanceMatches" Color="Color.Primary"/>
        </MudItem>
        <MudItem sm="3">
            <MudSwitch T="bool" Label="Show inactive players" Checked="@_ViewModel.ShowInactivePlayers" CheckedChanged="(x)=>_ViewModel.ShowActiveCheckedChanged(x)" Color="Color.Primary"/>
        </MudItem>
        <MudItem sm="3">
            <MudFab Color="Color.Primary" Size="Size.Small" OnClick="_ViewModel.ToggleDrawer" StartIcon="@Icons.Material.Filled.Close"></MudFab>
        </MudItem>
        <MudItem sm="10">
            @if (_ViewModel.AvailablePlayers != null)
            {
                <MudSelect FullWidth="true" Class="p-4" T="Player" Label="Players at the table" MultiSelection="true" @bind-SelectedValues="_ViewModel.SelectedPlayers" ToStringFunc="_ViewModel.PlayerToString">
                    @foreach (var player in _ViewModel.AvailablePlayers)
                    {
                        <MudSelectItem T="Player" Value="player">@player.Name</MudSelectItem>
                    }
                </MudSelect>
            }

        </MudItem>
    </MudGrid>
</MudDrawer>